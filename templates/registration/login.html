{% extends 'base.html' %}

{% block title %}Anmelden - Case Intelligence{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
            <div class="card shadow">
                <div class="card-header bg-dark text-white">
                    <h3 class="text-center mb-0">
                        <i class="bi bi-shield-lock"></i> Case Intelligence
                    </h3>
                </div>
                <div class="card-body">
                    <form method="post" id="loginForm">
                        {% csrf_token %}
                        
                        {% if form.errors %}
                            <div class="alert alert-danger">
                                <i class="bi bi-exclamation-triangle"></i>
                                Benutzername oder Passwort ist falsch.
                            </div>
                        {% endif %}
                        
                        <div class="mb-3">
                            <label for="id_username" class="form-label">Benutzername</label>
                            <input type="text" name="username" id="id_username" 
                                   class="form-control" required autofocus
                                   placeholder="Benutzername eingeben">
                        </div>
                        
                        <div class="mb-3">
                            <label for="id_password" class="form-label">Passwort</label>
                            <input type="password" name="password" id="id_password" 
                                   class="form-control" required
                                   placeholder="Passwort eingeben">
                        </div>
                        
                        <button type="submit" class="btn btn-primary w-100 mb-3">
                            <i class="bi bi-box-arrow-in-right"></i> Anmelden
                        </button>
                        
                        <input type="hidden" name="next" value="{{ next }}" />
                    </form>
                    
                    <!-- One-Click Demo Login fÃ¼r Recruiter -->
                    <div class="border-top pt-3">
                        <div class="alert alert-info py-2 mb-2">
                            <small>
                                <i class="bi bi-person-badge"></i>
                                <strong>Recruiter / Reviewer?</strong><br>
                                Nutzen Sie den Demo-Zugang, um das System zu erkunden.
                            </small>
                        </div>
                        <button type="button" class="btn btn-outline-success w-100" 
                                onclick="demoLogin()" id="demoBtn">
                            <i class="bi bi-play-circle"></i> 
                            <span id="demoBtnText">One-Click Demo-Login</span>
                        </button>
                    </div>
                </div>
                <div class="card-footer">
                    <div class="text-center text-muted small">
                        <i class="bi bi-shield-check"></i>
                        Portfolio-Projekt mit fiktiven Beispieldaten
                    </div>
                </div>
            </div>
            
            <!-- Security Disclaimer -->
            <div class="alert alert-secondary mt-3 small">
                <strong><i class="bi bi-info-circle"></i> Hinweis:</strong>
                Dies ist ein Referenzprojekt zur Demonstration von Django-Entwicklung.
                Alle Daten sind fiktiv. Keine echten personenbezogenen Informationen.
            </div>
        </div>
    </div>
</div>

<script>
function demoLogin() {
    const btn = document.getElementById('demoBtn');
    const btnText = document.getElementById('demoBtnText');
    
    // Visual Feedback
    btn.disabled = true;
    btnText.innerHTML = '<span class="spinner-border spinner-border-sm" role="status"></span> Anmelden...';
    
    // Fill credentials
    document.getElementById('id_username').value = 'demo_reviewer';
    document.getElementById('id_password').value = 'demo2024secure';
    
    // Submit after brief delay for UX
    setTimeout(function() {
        document.getElementById('loginForm').submit();
    }, 400);
}
</script>
{% endblock %}
